"use strict";(self.webpackChunkfreshcart=self.webpackChunkfreshcart||[]).push([[99],{8099:(S,c,_)=>{_.r(c),_.d(c,{ForgotpasswordComponent:()=>k});var m=_(6814),i=_(95),o=_(4769),f=_(4768),g=_(1120);const l=["form1"],p=["form2"],d=["form3"];function u(t,n){1&t&&(o.TgZ(0,"p",13),o._uU(1," Email is required "),o.qZA())}function w(t,n){1&t&&(o.TgZ(0,"p",13),o._uU(1," Email InValid Format "),o.qZA())}function h(t,n){if(1&t&&(o.ynx(0),o.YNc(1,u,2,0,"p",12),o.YNc(2,w,2,0,"p",12),o.BQk()),2&t){const e=o.oxw(2);o.xp6(1),o.Q6J("ngIf",e.f.email.getError("required")),o.xp6(1),o.Q6J("ngIf",e.f.email.getError("email"))}}function x(t,n){if(1&t&&(o.TgZ(0,"button",14),o._uU(1," Next "),o.qZA()),2&t){const e=o.oxw(2);o.Q6J("disabled",e.forgotForm.invalid)}}function C(t,n){1&t&&(o.TgZ(0,"button",15)(1,"span"),o._UZ(2,"i",16),o.qZA()())}function Z(t,n){if(1&t&&(o.TgZ(0,"p",17),o._uU(1),o.qZA()),2&t){const e=o.oxw(2);o.xp6(1),o.hij(" ",e.errMsg," ")}}function T(t,n){if(1&t){const e=o.EpF();o.TgZ(0,"form",3,4),o.NdJ("ngSubmit",function(){o.CHM(e);const s=o.oxw();return o.KtG(s.handleForgotPassword())}),o.TgZ(2,"div",5)(3,"label",6),o._uU(4,"Email:"),o.qZA(),o._UZ(5,"input",7),o.YNc(6,h,3,2,"ng-container",8),o.qZA(),o.YNc(7,x,2,1,"button",9),o.YNc(8,C,3,0,"button",10),o.YNc(9,Z,2,1,"p",11),o.qZA()}if(2&t){const e=o.oxw();o.Q6J("formGroup",e.forgotForm),o.xp6(6),o.Q6J("ngIf",e.f.email.errors&&(e.f.email.touched||e.f.email.value.length>0)),o.xp6(1),o.Q6J("ngIf",!e.isLoading),o.xp6(1),o.Q6J("ngIf",e.isLoading),o.xp6(1),o.Q6J("ngIf",e.errMsg)}}function b(t,n){1&t&&(o.TgZ(0,"p",13),o._uU(1," resetCode is required "),o.qZA())}function F(t,n){1&t&&(o.TgZ(0,"p",13),o._uU(1," must be at 6 chars "),o.qZA())}function I(t,n){if(1&t&&(o.ynx(0),o.YNc(1,b,2,0,"p",12),o.YNc(2,F,2,0,"p",12),o.BQk()),2&t){const e=o.oxw(2);o.xp6(1),o.Q6J("ngIf",e.r.resetCode.getError("required")),o.xp6(1),o.Q6J("ngIf",e.r.resetCode.getError("pattern"))}}function v(t,n){if(1&t&&(o.TgZ(0,"button",14),o._uU(1," Confirm "),o.qZA()),2&t){const e=o.oxw(2);o.Q6J("disabled",e.verifyCode.invalid)}}function A(t,n){1&t&&(o.TgZ(0,"button",15)(1,"span"),o._UZ(2,"i",16),o.qZA()())}function P(t,n){if(1&t&&(o.TgZ(0,"p",17),o._uU(1),o.qZA()),2&t){const e=o.oxw(2);o.xp6(1),o.hij(" ",e.errMsg," ")}}function Q(t,n){if(1&t){const e=o.EpF();o.TgZ(0,"form",3,18),o.NdJ("ngSubmit",function(){o.CHM(e);const s=o.oxw();return o.KtG(s.handleVerifyResetCode())}),o.TgZ(2,"div",5)(3,"label",19),o._uU(4,"Reset Code:"),o.qZA(),o._UZ(5,"input",20),o.YNc(6,I,3,2,"ng-container",8),o.qZA(),o.YNc(7,v,2,1,"button",9),o.YNc(8,A,3,0,"button",10),o.YNc(9,P,2,1,"p",11),o.qZA()}if(2&t){const e=o.oxw();o.Q6J("formGroup",e.verifyCode),o.xp6(6),o.Q6J("ngIf",e.r.resetCode.errors&&(e.r.resetCode.touched||e.r.resetCode.value.length>0)),o.xp6(1),o.Q6J("ngIf",!e.isLoading),o.xp6(1),o.Q6J("ngIf",e.isLoading),o.xp6(1),o.Q6J("ngIf",e.errMsg)}}function q(t,n){1&t&&(o.TgZ(0,"p",13),o._uU(1," Email is required "),o.qZA())}function J(t,n){1&t&&(o.TgZ(0,"p",13),o._uU(1," Email InValid Format "),o.qZA())}function N(t,n){if(1&t&&(o.ynx(0),o.YNc(1,q,2,0,"p",12),o.YNc(2,J,2,0,"p",12),o.BQk()),2&t){const e=o.oxw(2);o.xp6(1),o.Q6J("ngIf",e.c.email.getError("required")),o.xp6(1),o.Q6J("ngIf",e.c.email.getError("email"))}}function E(t,n){1&t&&(o.TgZ(0,"p",25),o._uU(1," New Password Is Required "),o.qZA())}function U(t,n){1&t&&(o.TgZ(0,"p",25),o._uU(1," Must be at least 6 chars "),o.qZA())}function M(t,n){if(1&t&&(o.ynx(0),o.YNc(1,E,2,0,"p",24),o.YNc(2,U,2,0,"p",24),o.BQk()),2&t){const e=o.oxw(2);o.xp6(1),o.Q6J("ngIf",e.c.newPassword.getError("required")),o.xp6(1),o.Q6J("ngIf",e.c.newPassword.getError("pattern"))}}function Y(t,n){if(1&t&&(o.TgZ(0,"button",14),o._uU(1," Done "),o.qZA()),2&t){const e=o.oxw(2);o.Q6J("disabled",e.resetPassword.invalid)}}function y(t,n){1&t&&(o.TgZ(0,"button",15)(1,"span"),o._UZ(2,"i",16),o.qZA()())}function L(t,n){if(1&t&&(o.TgZ(0,"p",17),o._uU(1),o.qZA()),2&t){const e=o.oxw(2);o.xp6(1),o.hij(" ",e.errMsg," ")}}function R(t,n){if(1&t){const e=o.EpF();o.TgZ(0,"form",3,21),o.NdJ("ngSubmit",function(){o.CHM(e);const s=o.oxw();return o.KtG(s.handleResetPassword())}),o.TgZ(2,"div",5)(3,"label",6),o._uU(4,"Email:"),o.qZA(),o._UZ(5,"input",7),o.YNc(6,N,3,2,"ng-container",8),o.qZA(),o.TgZ(7,"div",5)(8,"label",22),o._uU(9,"newPassword:"),o.qZA(),o._UZ(10,"input",23),o.YNc(11,M,3,2,"ng-container",8),o.qZA(),o.YNc(12,Y,2,1,"button",9),o.YNc(13,y,3,0,"button",10),o.YNc(14,L,2,1,"p",11),o.qZA()}if(2&t){const e=o.oxw();o.Q6J("formGroup",e.resetPassword),o.xp6(6),o.Q6J("ngIf",e.c.email.errors&&(e.c.email.touched||e.c.email.value.length>0)),o.xp6(5),o.Q6J("ngIf",e.c.newPassword.errors&&(e.c.newPassword.value.length||e.c.newPassword.touched)),o.xp6(1),o.Q6J("ngIf",!e.isLoading),o.xp6(1),o.Q6J("ngIf",e.isLoading),o.xp6(1),o.Q6J("ngIf",e.errMsg)}}let k=(()=>{var t;class n{constructor(r,s,a){this._AuthService=r,this._Renderer2=s,this._Router=a,this.first=!0,this.seconde=!1,this.done=!1,this.isLoading=!1,this.errMsg="",this.email=""}ngOnInit(){this.forgotForm=new i.cw({email:new i.NI("",[i.kI.required,i.kI.email])}),this.verifyCode=new i.cw({resetCode:new i.NI("",[i.kI.required,i.kI.pattern(/^\d{6}$/)])}),this.resetPassword=new i.cw({email:new i.NI("",[i.kI.required,i.kI.email]),newPassword:new i.NI("",[i.kI.required,i.kI.pattern(/^\w{6,}$/)])})}get f(){return this.forgotForm.controls}get r(){return this.verifyCode.controls}get c(){return this.resetPassword.controls}handleForgotPassword(){this.isLoading=!0,this.forgotForm.valid&&(console.log(this.forgotForm.value),this._AuthService.setForgotPassword(this.forgotForm.value).subscribe({next:r=>{console.log(r),"success"===r.statusMsg&&(this.errMsg=r.message,this.isLoading=!1,this.forgotForm.disable(),this.email=this.forgotForm.get("email")?.value,this.first=!1,this.seconde=!0)},error:r=>{console.log(r),this.errMsg=r.error.message,this.isLoading=!1}}))}handleVerifyResetCode(){this.isLoading=!0,this.verifyCode.valid&&(console.log(this.verifyCode.value),this._AuthService.setVerifyResetCode(this.verifyCode.value).subscribe({next:r=>{console.log(r),"Success"===r.status&&(this.errMsg=r.status,this.isLoading=!1,this.verifyCode.disable(),this.seconde=!1,this.done=!0,this.resetPassword.get("email")?.setValue(this.email),this.resetPassword.get("email")?.disable())},error:r=>{console.log(r),this.errMsg=r.error.message,this.isLoading=!1}}))}handleResetPassword(){if(this.isLoading=!0,this.resetPassword.valid){console.log(this.resetPassword.value);const r={email:this.email,newPassword:this.resetPassword.get("newPassword")?.value};this._AuthService.resetPassword(r).subscribe({next:s=>{console.log(s),s?.token&&(this.errMsg=s.message,localStorage.setItem("_token",s?.token),this._AuthService.saveUser(),this.isLoading=!1,this.resetPassword.disable(),setTimeout(()=>{this._Router.navigate(["/home"])},1e3))},error:s=>{console.log(s),this.errMsg=s.error.message,this.isLoading=!1}})}}}return(t=n).\u0275fac=function(r){return new(r||t)(o.Y36(f.e),o.Y36(o.Qsj),o.Y36(g.F0))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-forgotpassword"]],viewQuery:function(r,s){if(1&r&&(o.Gf(l,5),o.Gf(p,5),o.Gf(d,5)),2&r){let a;o.iGM(a=o.CRH())&&(s.form1=a.first),o.iGM(a=o.CRH())&&(s.form2=a.first),o.iGM(a=o.CRH())&&(s.form3=a.first)}},standalone:!0,features:[o.jDz],decls:6,vars:3,consts:[[1,"bg-main-light","rounded","p-3","shadow","w-50","mx-auto"],[1,"text-center","h3"],["class","vstack gap-3",3,"formGroup","ngSubmit",4,"ngIf"],[1,"vstack","gap-3",3,"formGroup","ngSubmit"],["form1",""],[1,"form-item"],["for","email"],["type","email","formControlName","email","placeholder","Your Email...",1,"form-control"],[4,"ngIf"],["class","main-btn",3,"disabled",4,"ngIf"],["type","button","disabled","","class","main-btn ms-auto",4,"ngIf"],["class","alert alert-danger text-center w-50 mx-auto mb-0 p-1 mt-3",4,"ngIf"],["class","alert alert-danger w-50 p-1 small",4,"ngIf"],[1,"alert","alert-danger","w-50","p-1","small"],[1,"main-btn",3,"disabled"],["type","button","disabled","",1,"main-btn","ms-auto"],[1,"fas","fa-spinner","fa-spin"],[1,"alert","alert-danger","text-center","w-50","mx-auto","mb-0","p-1","mt-3"],["form2",""],["for","resetCode"],["type","text","formControlName","resetCode","placeholder","Your Reset Code...",1,"form-control"],["form3",""],["for","newPassword"],["type","password","formControlName","newPassword","placeholder","Your newPassword...",1,"form-control"],["class","alert alert-danger w-50 mx-auto p-1 mb-0",4,"ngIf"],[1,"alert","alert-danger","w-50","mx-auto","p-1","mb-0"]],template:function(r,s){1&r&&(o.TgZ(0,"section",0)(1,"h1",1),o._uU(2,"Forgot Password"),o.qZA(),o.YNc(3,T,10,5,"form",2),o.YNc(4,Q,10,5,"form",2),o.YNc(5,R,15,6,"form",2),o.qZA()),2&r&&(o.xp6(3),o.Q6J("ngIf",s.first),o.xp6(1),o.Q6J("ngIf",s.seconde),o.xp6(1),o.Q6J("ngIf",s.done))},dependencies:[m.ez,m.O5,i.UX,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u]}),n})()}}]);